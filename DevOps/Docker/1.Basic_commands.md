# Basic Commands

Source:
[Subicura](https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html),
[freedeveloper](https://freedeveloper.tistory.com/474)

### Instatll

---

- Download via
  [Docker Docs](https://docs.docker.com/desktop/install/mac-install/)

### 1. Basic Commands

---

| 설명                | 명령어                | 비고                                         |
| ------------------- | --------------------- | -------------------------------------------- |
| Version 확인        | $ docker version      |                                              |
| Container 목록 확인 | $ docker ps [OPTIONS] | • 그냥 ps만 쓰면 ‘실행 중인’ 컨테이너만 조회 |

• docker ps -a을 사용하면, 모든 컨테이너 조회 • docker ps -n 3 → 최근에 생성한 3
개 컨테이너 조회 • docker ps -f ’name=ser\*’ → 이름이 ser로 시작하는 컨테이너 조
회 | | Container 중지 | $ docker stop name_or_ID | • 띄워쓰기로 여러개 컨테이너
중지 가능 | | Container 제거 | $ docker rm container_name_or_ID | • 중지된 컨테
이너 ID를 가져와서 한번에 삭제 $ docker rm -v $(docker ps -a -q -f
status=exited) | | Image 확인 | $ docker images | | | Image 다운 | $ docker pull
NAME:TAG | run명령어를 입력하면 이미지가 없을 때 자동으로 다운받지만 pull 은 최
신버전으로 다시 다운 | | Image 삭제 | $ docker rmi NAME:TAG | |

**Container 실행하기** (`run`)

---

```bash
$ docker **run [options]**
```

| 옵션  | 설명                                                   |
| ----- | ------------------------------------------------------ |
| -d    | detached mode 흔히 말하는 백그라운드 모드              |
| -p    | 호스트와 컨테이너의 포트를 연결 (포워딩)               |
| -v    | 호스트와 컨테이너의 디렉토리를 연결 (마운트)           |
| -e    | 컨테이너 내에서 사용할 환경변수 설정                   |
| –name | 컨테이너 이름 설정                                     |
| –rm   | 프로세스 종료시 컨테이너 자동 제거                     |
| -it   | -i와 -t를 동시에 사용한 것으로 터미널 입력을 위한 옵션 |

**예시 1**

- 컨테이너 내부에 들어가기 위해 bash 쉘을 실행하고 키보드 입력을 위해 `-it`옵션
  을 줍니다. 추가적으로 프로세스가 종료되면 컨테이너가 자동으로 삭제되도록
   `--rm`옵션도 추가하였습니다.

```bash
$ docker run --rm -it ubuntu:16.04 /bin/bash
```

**예시 2**

- -p 옵션은 `localhost_port:container_port`

```bash
$ docker run -d -p 1234:6379 redis
```

명령어 실행하기 (`**exec**`)

---

- `run` 이랑 똑같이 사용할 수 있는데, 차이점은 run은 새로 컨테이너를 만들어서 실
  행하고, `exec` 는 실행 중인 컨테이너에 명령을 내리는 정도다.

```bash
$ docker exec -it redis /bin/bash
```

- 이렇게 하면 실행되고 있는 레디스 서버 bash 창에 연결된다.

### 2. 컨테이너 로그 보기

---

```bash
$ docker **logs** [options] containter_name
```

- Option은 `-f` 와 `--tail` 만 알아보자.
  ```bash
  $ docker logs **--tail 5** ${CONTAINER_ID}
  ```
  - logs 다음에 `--tail 5` 라고 쓰면 로그의 가장 최근 5개만 출력하라는 뜻. tail
    안쓰면 싹다 출력
  ```bash
  $ docker logs **-f** ${CONTAINER_ID}
  ```
  - `-f` 옵션을 주면, **실시간으로 출력**한다.
